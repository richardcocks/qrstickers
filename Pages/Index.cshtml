@page
@model QRStickers.Pages.IndexModel
@{
    ViewData["Title"] = "Home";
}

<h1>Welcome to QR Stickers</h1>

@if (User.Identity?.IsAuthenticated == true)
{
    <h2>Hello @User.Identity.Name!</h2>

    <h3>Your Connections</h3>

    @if (Model.ConnectionCount == 0)
    {
        <div class="alert alert-info">
            <p>You haven't connected any accounts yet.</p>
            <p><a href="/Connections/Create" class="btn btn-primary">Add Your First Connection</a></p>
        </div>
    }
    else
    {
        <p>You have <strong>@Model.ConnectionCount</strong> connection@(Model.ConnectionCount == 1 ? "" : "s").</p>

        <ul style="list-style: none; padding: 0;">
            @foreach (var connection in Model.Connections)
            {
                <li style="padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; background-color: #f9f9f9;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>@connection.DisplayName</strong>
                            <span style="color: #666; margin-left: 10px;">(@connection.ConnectionType)</span>
                            @if (connection.IsActive)
                            {
                                <span style="color: #28a745; margin-left: 10px; font-size: 0.9em;">‚óè Active</span>
                            }
                        </div>
                        <div>
                            @if (connection.ConnectionType == "Meraki")
                            {
                                <a href="/Meraki/Organizations?connectionId=@connection.Id" style="margin-right: 10px;">View Organizations</a>
                            }
                        </div>
                    </div>
                </li>
            }
        </ul>

        <p>
            <a href="/Connections" class="btn btn-secondary">Manage Connections</a>
            <a href="/Connections/Create" class="btn btn-primary" style="margin-left: 10px;">Add New Connection</a>
        </p>
    }
}
else
{
    <p>Please <a href="/Identity/Account/Login">login</a> or <a href="/Identity/Account/Register">register</a> to get started.</p>
}

<hr>

<h3>QR Code Generator</h3>
<p>Use the /qrcode endpoint to generate QR codes</p>
<p>Example: <a href="/qrcode?q=https://example.com">/qrcode?q=https://example.com</a></p>
